<template name="collection_view">
  <div class='z-mongo-admin'>
    {{#if loggingIn}}
      {{> spinner}}
    {{else}}
      {{> admin_navbar}}
      <div class="container content">
        <div>
          <p>Filter by (mongo query):
            <textarea placeholder="IE name: 'Joe'"id="filter_selector" />
          </p>
        </div>
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              {{# each headers }}
              <th><a href="#" class="sort">{{name}} ({{type}})</a></th>
              {{/each}}
              <th>Action</th>
            </tr>
            <tr>
              <th>Filter:</th>
              {{# each nonid_headers }}
              <th>
                <input name="{{name}}" class="column_filter input-small" type="text" />
              </th>
              {{/each}}
              <th></th>
            </tr>
          </thead>
          <tbody>
            {{#each rows }}
            <tr>
              <td><a href="{{document_url}}">{{document_id}}</a></td>
            {{#each values_in_order}}
              <td data-field='{{ name }}' class='collection-field'>{{ value }}</td>
            {{/each}}
            <td><div data-id="{{document_id}}" class="btn admin-delete-doc">Delete</div></td>
            </tr>
            {{/each}}
            <tr id="admin-create-row">
              <th>Create:</th>
                {{# each nonid_headers }}
                <th>
                  <input name="{{name}}" class="input-small" type="text" />
                </th>
                {{/each}}
                <td><div class="btn admin-create-doc">Create</div></td>
              </form>
            </tr>
          </tbody>
        </table>
      </div>
    {{/if}}
  </div>
</template>
